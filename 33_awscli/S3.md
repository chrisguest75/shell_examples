# S3

S3 is a global resource  

## Listing 

```sh
# list buckets in the account
aws s3 ls
aws s3api list-buckets | jq '.["Buckets"][].Name' --raw-output 

# get tags 
aws s3api list-buckets | jq '.["Buckets"][].Name' --raw-output | while read in; do aws s3api get-bucket-tagging --bucket $in; done
```

```sh 
# list contents of bucket 
aws --profile myprofile ls s3://bucket_name
```

## Copying

```sh
# Copy files from s3 into s3 subfolder
aws s3 cp "s3://file.json" "s3://bucket_name/folder/subfolder/ignition_etcd_0.json"

# copy local file to s3
aws --profile myprofile s3 cp ./fragment.json s3://bucket_name/fragment.json
```

## Syncing

Syncing files can be done bi-directionally.

```sh
aws s3 sync s3://bucket_name path/to/target
```


